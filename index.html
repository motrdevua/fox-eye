<!doctype html>
<html lang="uk">
  <head>
    <meta charset="utf-8" />
    <title>FOX-EYE v0.1 (Pre-release)</title>
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' stroke='%2300ff00' stroke-width='5' fill='none'/><line x1='50' y1='5' x2='50' y2='95' stroke='%2300ff00' stroke-width='2'/><line x1='5' y1='50' x2='95' y2='50' stroke='%2300ff00' stroke-width='2'/></svg>"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./app.css" />
    <link
      href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mgrs@1.0.0/dist/mgrs.min.js"></script>
    <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
  </head>

  <body>
    <div id="search-overlay">
      <div class="search-box">
        <h2 style="margin-top: 0">FOX-EYE</h2>
        <div class="radio-group">
          <input
            type="radio"
            name="search-type"
            id="type-city"
            value="city"
            checked
            onclick="updatePlaceholder()"
          />
          <label for="type-city" class="radio-label">–ù–ü</label>
          <input
            type="radio"
            name="search-type"
            id="type-mgrs"
            value="mgrs"
            onclick="updatePlaceholder()"
          />
          <label for="type-mgrs" class="radio-label">MGRS</label>
        </div>
        <input
          type="text"
          id="search-input"
          placeholder="–í–í–ï–î–Ü–¢–¨ –ù–ê–ó–í–£ –ù–ü..."
          onkeypress="if (event.key === 'Enter') performSearch();"
        />
        <br />
        <button
          class="main-btn"
          onclick="performSearch()"
          style="width: auto"
          data-icon="launch"
        >
          –ü–û–®–£–ö
        </button>
      </div>
    </div>

    <div id="map"></div>

    <div class="data-panel" id="map-controls" style="display: none">
      <span class="label-desc">–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</span>
      <div class="tools-selector">
        <button
          class="icon-btn"
          id="ruler-btn-1"
          onclick="setActiveTool('ruler')"
          title="–õ—ñ–Ω—ñ–π–∫–∞"
          data-icon="ruler"
        ></button>

        <button
          class="icon-btn"
          id="ruler-btn-2"
          onclick="setActiveTool('compass')"
          title="–¶–∏—Ä–∫—É–ª—å"
          data-icon="compass"
        ></button>

        <button
          class="icon-btn"
          id="ruler-btn-3"
          onclick="setActiveTool('scan')"
          title="–°–∫–∞–Ω–µ—Ä –≤–∏—Å–æ—Ç (Area Scan)"
          data-icon="scan"
        ></button>

        <button
          class="icon-btn"
          id="style-toggle"
          onclick="toggleMapStyle()"
          title="–¢–∏–ø –º–∞–ø–∏"
          data-icon="map"
        ></button>

        <button
          class="icon-btn"
          id="toggle-contours-btn"
          title="–Ü–∑–æ–≥—ñ–ø—Å–∏"
          data-icon="izogips"
        ></button>

        <button
          class="icon-btn"
          onclick="printMap()"
          title="–î—Ä—É–∫ / –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è"
          data-icon="print"
        ></button>
      </div>

      <div>
        <span class="label-desc">MGRS</span>
        <div class="hint">
          <span
            id="live-coords"
            style="color: #ffcc00; font-size: 16px; font-weight: bold"
            >---</span
          >
        </div>
      </div>

      <div class="tools-selector">
        <button
          class="icon-btn"
          id="export-btn"
          data-tooltip="–ó–ë–ï–†–ï–ì–¢–ò (JSON)"
          data-icon="download"
        ></button>

        <button
          class="icon-btn"
          id="import-btn"
          data-tooltip="–ó–ê–í–ê–ù–¢–ê–ñ–ò–¢–ò"
          data-icon="upload"
        ></button>

        <input
          type="file"
          id="file-input"
          accept=".json"
          style="display: none"
        />

        <button
          class="icon-btn danger-btn"
          id="clear-btn"
          data-tooltip="–û–ß–ò–°–¢–ò–¢–ò –í–°–ï"
          data-icon="clear"
        ></button>

        <button
          class="icon-btn"
          id="help-btn"
          data-tooltip="–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø"
          data-icon="help"
        ></button>
      </div>

      <button class="main-btn" onclick="location.reload()" data-icon="reset">
        –ù–û–í–ò–ô –ü–û–®–£–ö
      </button>
    </div>

    <div id="infobar" class="info-container" style="display: none">
      –í–Ü–î–°–¢–ê–ù–¨: 0 –º
    </div>

    <div id="results-sidebar" class="results-panel" style="display: none">
      <div class="panel-header">–†–ï–ó–£–õ–¨–¢–ê–¢–ò –°–ö–ê–ù–£–í–ê–ù–ù–Ø</div>
      <div id="points-list" class="points-list"></div>
      <button
        class="main-btn"
        onclick="clearScanResults()"
        style="margin-top: 10px"
        data-icon="clear"
      >
        –û–ß–ò–°–¢–ò–¢–ò
      </button>
    </div>

    <div id="modal-prompt" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div class="panel-header" id="modal-prompt-title">–ó–ê–ü–ò–¢ –î–ê–ù–ò–•</div>
        <div style="padding: 12px">
          <p
            id="modal-prompt-text"
            style="margin-bottom: 15px; color: var(--color-main)"
          ></p>
          <input
            type="text"
            id="modal-prompt-input"
            class="main-input"
            style="width: 100%"
          />
          <div style="display: flex; gap: 10px">
            <button class="main-btn" id="modal-prompt-ok">–ü–Ü–î–¢–í–ï–†–î–ò–¢–ò</button>
            <button
              class="main-btn"
              id="modal-prompt-cancel"
              style="background: var(--color-accent); color: white"
            >
              –°–ö–ê–°–£–í–ê–¢–ò
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="modal-alert" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div
          class="panel-header"
          style="color: var(--color-accent); border-color: var(--color-main)"
        >
          –£–í–ê–ì–ê!
        </div>
        <div style="padding: 20px; text-align: center">
          <p id="modal-alert-text" style="margin-bottom: 20px; color: #fff"></p>
          <button class="main-btn" id="modal-alert-ok">–ó–†–û–ó–£–ú–Ü–õ–û</button>
        </div>
      </div>
    </div>

    <div id="modal-help" class="modal-overlay" style="display: none">
      <div class="modal-content" style="max-width: 500px">
        <div class="panel-header">–ö–û–†–û–¢–ö–ò–ô –î–û–í–Ü–î–ù–ò–ö</div>

        <div
          class="help-content"
          style="
            padding: 15px;
            font-family: var(--font-mono);
            font-size: 14px;
            max-height: 70vh;
            overflow-y: auto;
          "
        >
          <div class="help-section" style="margin-bottom: 20px">
            <h3
              style="
                color: var(--color-yellow);
                border-bottom: 1px dashed #333;
                padding-bottom: 5px;
                margin-bottom: 10px;
              "
            >
              üìè –õ–Ü–ù–Ü–ô–ö–ê
            </h3>
            <ul style="list-style: none; padding: 0; margin: 0; color: #ccc">
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">–õ–ö–ú (–ö–∞—Ä—Ç–∞)</b> ‚Äî –î–æ–¥–∞—Ç–∏
                —Ç–æ—á–∫—É (WP)
              </li>
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">–õ–ö–ú (–¢–æ—á–∫–∞)</b> ‚Äî –ó–∞—Ç–∏—Å–Ω—É—Ç–∏
                –π —Ç—è–≥–Ω—É—Ç–∏
              </li>
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-accent)">–ü–ö–ú (–¢–æ—á–∫–∞)</b> ‚Äî –í–∏–¥–∞–ª–∏—Ç–∏
                —Ç–æ—á–∫—É
              </li>
            </ul>
          </div>

          <div class="help-section" style="margin-bottom: 20px">
            <h3
              style="
                color: var(--color-yellow);
                border-bottom: 1px dashed #333;
                padding-bottom: 5px;
                margin-bottom: 10px;
              "
            >
              üéØ –¶–ò–†–ö–£–õ–¨ (–†–ê–î–Ü–£–°)
            </h3>
            <ul style="list-style: none; padding: 0; margin: 0; color: #ccc">
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">1-–π –ö–õ–Ü–ö</b> ‚Äî –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏
                –¶–ï–ù–¢–†
              </li>
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">–†–£–• –ú–ò–®–Ü</b> ‚Äî –û–±—Ä–∞—Ç–∏
                –¥–∏—Å—Ç–∞–Ω—Ü—ñ—é
              </li>
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">2-–π –ö–õ–Ü–ö</b> ‚Äî –ó–∞—Ñ—ñ–∫—Å—É–≤–∞—Ç–∏
                –†–ê–î–Ü–£–°
              </li>
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-accent)">–ü–ö–ú</b> ‚Äî –°–ö–ê–°–£–í–ê–¢–ò (–ø—ñ–¥
                —á–∞—Å –º–∞–ª—é–≤–∞–Ω–Ω—è)
              </li>
              <li style="margin-bottom: 5px">
                <i>* 3-–π –∫–ª—ñ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ—á–∏–Ω–∞—î –Ω–æ–≤–µ –∫–æ–ª–æ</i>
              </li>
            </ul>
          </div>

          <div class="help-section" style="margin-bottom: 20px">
            <h3
              style="
                color: var(--color-yellow);
                border-bottom: 1px dashed #333;
                padding-bottom: 5px;
                margin-bottom: 10px;
              "
            >
              üì° –°–ö–ê–ù–ï–† –í–ò–°–û–¢
            </h3>
            <ul style="list-style: none; padding: 0; margin: 0; color: #ccc">
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">–õ–ö–ú (–ó–∞—Ç–∏—Å–Ω—É—Ç–∏)</b> ‚Äî
                –ü–æ—á–∞—Ç–æ–∫ –∑–æ–Ω–∏
              </li>
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">–¢–Ø–ì–ù–£–¢–ò</b> ‚Äî –í–∏–¥—ñ–ª–∏—Ç–∏
                –∫–≤–∞–¥—Ä–∞—Ç
              </li>
              <li style="margin-bottom: 5px">
                <b style="color: var(--color-main)">–í–Ü–î–ü–£–°–¢–ò–¢–ò</b> ‚Äî –ü–æ—à—É–∫
                –ø–∞–Ω—ñ–≤–Ω–∏—Ö –≤–∏—Å–æ—Ç
              </li>
            </ul>
          </div>

          <div class="help-section">
            <h3
              style="
                color: var(--color-yellow);
                border-bottom: 1px dashed #333;
                padding-bottom: 5px;
                margin-bottom: 10px;
              "
            >
              üíæ –î–ê–ù–Ü
            </h3>
            <ul style="list-style: none; padding: 0; margin: 0; color: #ccc">
              <li style="margin-bottom: 5px">
                <b>–ê–í–¢–û–ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø</b> ‚Äî –ü—Ä–∞—Ü—é—î –ø–æ—Å—Ç—ñ–π–Ω–æ (F5 friendly)
              </li>
              <li style="margin-bottom: 5px">‚¨á ‚Äî –ó–±–µ—Ä–µ–≥—Ç–∏ —Ñ–∞–π–ª (JSON)</li>
              <li style="margin-bottom: 5px">‚¨Ü ‚Äî –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–∏—Ç—É–∞—Ü—ñ—é</li>
            </ul>
          </div>
        </div>

        <div
          style="padding: 10px; text-align: right; border-top: 1px solid #333"
        >
          <button id="close-help-btn" class="main-btn" style="width: 100%">
            –ó–†–û–ó–£–ú–Ü–õ–û
          </button>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
