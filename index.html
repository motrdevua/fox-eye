<!doctype html>
<html lang="uk">
  <head>
    <meta charset="utf-8" />
    <title>FOX-EYE v0.1 (Pre-release)</title>
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' stroke='%2300ff00' stroke-width='5' fill='none'/><line x1='50' y1='5' x2='50' y2='95' stroke='%2300ff00' stroke-width='2'/><line x1='5' y1='50' x2='95' y2='50' stroke='%2300ff00' stroke-width='2'/></svg>"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./app.css" />
    <link
      href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mgrs@1.0.0/dist/mgrs.min.js"></script>
    <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
  </head>

  <body>
    <div id="search-overlay">
      <div class="search-box">
        <h2 style="margin-top: 0">FOX-EYE</h2>
        <div class="radio-group">
          <input
            type="radio"
            name="search-type"
            id="type-city"
            value="city"
            checked
            onclick="updatePlaceholder()"
          />
          <label for="type-city" class="radio-label">НП</label>
          <input
            type="radio"
            name="search-type"
            id="type-mgrs"
            value="mgrs"
            onclick="updatePlaceholder()"
          />
          <label for="type-mgrs" class="radio-label">MGRS</label>
        </div>
        <input
          type="text"
          id="search-input"
          placeholder="ВВЕДІТЬ НАЗВУ НП..."
          onkeypress="if (event.key === 'Enter') performSearch();"
        />
        <br />
        <button
          class="main-btn"
          onclick="performSearch()"
          style="width: auto"
          data-icon="launch"
        >
          ПОШУК
        </button>
      </div>
    </div>

    <div id="map"></div>

    <div class="data-panel" id="map-controls" style="display: none">
      <span class="label-desc">Інструменти</span>
      <div class="ruler-selector">
        <button
          class="icon-btn"
          id="ruler-btn-1"
          onclick="setActiveTool('ruler')"
          title="Лінійка"
          data-icon="ruler"
        ></button>

        <button
          class="icon-btn"
          id="ruler-btn-2"
          onclick="setActiveTool('compass')"
          title="Циркуль"
          data-icon="compass"
        ></button>

        <button
          class="icon-btn"
          id="ruler-btn-3"
          onclick="setActiveTool('scan')"
          title="Сканер висот (Area Scan)"
          data-icon="scan"
        ></button>

        <button
          class="icon-btn"
          id="style-toggle"
          onclick="toggleMapStyle()"
          title="Тип мапи"
          data-icon="map"
        ></button>

        <button
          class="icon-btn"
          id="toggle-contours-btn"
          title="Ізогіпси"
          data-icon="izogips"
        ></button>

        <button
          class="icon-btn"
          onclick="printMap()"
          title="Друк / Збереження"
          data-icon="print"
        ></button>
      </div>

      <div>
        <span class="label-desc">MGRS</span>
        <span
          id="live-coords"
          style="color: #ffcc00; font-size: 16px; font-weight: bold"
          >---</span
        >
      </div>

      <div class="hint">
        • Циркуль: 1-й клік центр, 2-й радіус<br />
        • Shift+Click: замір між маркерами
      </div>

      <button class="main-btn" onclick="location.reload()" data-icon="reset">
        НОВИЙ ПОШУК
      </button>
    </div>

    <div id="distance-info" class="distance-container" style="display: none">
      ВІДСТАНЬ: 0 м
    </div>

    <div id="results-sidebar" class="results-panel" style="display: none">
      <div class="panel-header">РЕЗУЛЬТАТИ СКАНУВАННЯ</div>
      <div id="points-list" class="points-list"></div>
      <button
        class="main-btn"
        onclick="clearScanResults()"
        style="margin-top: 10px"
        data-icon="clear"
      >
        ОЧИСТИТИ
      </button>
    </div>

    <div id="modal-prompt" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div class="panel-header" id="modal-prompt-title">ЗАПИТ ДАНИХ</div>
        <div style="padding: 12px">
          <p
            id="modal-prompt-text"
            style="margin-bottom: 15px; color: var(--color-main)"
          ></p>
          <input
            type="text"
            id="modal-prompt-input"
            class="main-input"
            style="width: 100%"
          />
          <div style="display: flex; gap: 10px">
            <button class="main-btn" id="modal-prompt-ok">ПІДТВЕРДИТИ</button>
            <button
              class="main-btn"
              id="modal-prompt-cancel"
              style="background: var(--color-accent); color: white"
            >
              СКАСУВАТИ
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="modal-alert" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div
          class="panel-header"
          style="color: var(--color-accent); border-color: var(--color-main)"
        >
          УВАГА!
        </div>
        <div style="padding: 20px; text-align: center">
          <p id="modal-alert-text" style="margin-bottom: 20px; color: #fff"></p>
          <button class="main-btn" id="modal-alert-ok">ЗРОЗУМІЛО</button>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
